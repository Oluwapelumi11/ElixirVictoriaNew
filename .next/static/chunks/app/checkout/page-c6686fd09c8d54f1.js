(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{2661:function(e,t,s){Promise.resolve().then(s.bind(s,5063))},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8226:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(9763).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},9345:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(9763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3774:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3041:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(9763).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9376:function(e,t,s){"use strict";var i=s(5475);s.o(i,"useParams")&&s.d(t,{useParams:function(){return i.useParams}}),s.o(i,"useRouter")&&s.d(t,{useRouter:function(){return i.useRouter}}),s.o(i,"useSearchParams")&&s.d(t,{useSearchParams:function(){return i.useSearchParams}})},257:function(e,t,s){"use strict";var i,r;e.exports=(null==(i=s.g.process)?void 0:i.env)&&"object"==typeof(null==(r=s.g.process)?void 0:r.env)?s.g.process:s(4227)},4227:function(e){!function(){var t={229:function(e){var t,s,i,r=e.exports={};function a(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{s="function"==typeof clearTimeout?clearTimeout:n}catch(e){s=n}}();var o=[],c=!1,d=-1;function u(){c&&i&&(c=!1,i.length?o=i.concat(o):d=-1,o.length&&m())}function m(){if(!c){var e=l(u);c=!0;for(var t=o.length;t;){for(i=o,o=[];++d<t;)i&&i[d].run();d=-1,t=o.length}i=null,c=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===n||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];o.push(new h(e,t)),1!==o.length||c||l(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},s={};function i(e){var r=s[e];if(void 0!==r)return r.exports;var a=s[e]={exports:{}},n=!0;try{t[e](a,a.exports,i),n=!1}finally{n&&delete s[e]}return a.exports}i.ab="//";var r=i(229);e.exports=r}()},5063:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var i=s(7437),r=s(2265),a=s(429),n=s(8819),l=s(7648),o=s(2660),c=s(2369),d=s(9345),u=s(3041),m=s(3774),h=s(8226),p=s(2371),x=s(9376),f=s(3145),y=s(257);function g(){let[e,t]=(0,n.YD)({triggerOnce:!0,threshold:.1}),{items:s,getSubtotal:g,getTotal:v,clearCart:N}=(0,p.xS)(),{user:b,isAuthenticated:j,token:w}=(0,p.LM)(),_=(0,x.useRouter)(),[k,S]=(0,r.useState)({customer_name:(null==b?void 0:b.firstName)?"".concat(b.firstName," ").concat(b.lastName):"",customer_email:(null==b?void 0:b.email)||"",customer_phone:"",notes:""}),[C,O]=(0,r.useState)([]),[T,M]=(0,r.useState)(!1),[P,L]=(0,r.useState)(!1),[E,Z]=(0,r.useState)(""),[z,A]=(0,r.useState)(!1),[I,F]=(0,r.useState)(""),U=g(),q=U>200?0:15,B=.1*U,R=v();(0,r.useEffect)(()=>{0===s.length&&_.push("/cart")},[s,_]),(0,r.useEffect)(()=>{j&&w&&D()},[j,w]);let D=async()=>{try{let e=y.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:5000",t=await fetch("".concat(e,"/api/addresses"),{headers:{Authorization:"Bearer ".concat(w)}});if(t.ok){let e=await t.json();O(e.addresses)}}catch(e){console.error("Failed to load addresses:",e)}},J=e=>{let{name:t,value:s}=e.target;S(e=>({...e,[t]:s}))},H=async()=>{M(!0),Z("");try{let e=y.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:5000",t=await fetch("".concat(e,"/api/orders"),{method:"POST",headers:{"Content-Type":"application/json",...w&&{Authorization:"Bearer ".concat(w)}},body:JSON.stringify({customer_email:k.customer_email,customer_name:k.customer_name,customer_phone:k.customer_phone,items:s,subtotal:U,tax:B,shipping:q,total:R,shipping_address_id:k.shipping_address_id,billing_address_id:k.billing_address_id,notes:k.notes})}),i=await t.json();t.ok?(A(!0),await K(i.order.id)):Z(i.message||"Failed to create order")}catch(e){Z("Network error. Please check your connection and try again.")}finally{M(!1)}},K=async e=>{L(!0),Z("");try{let t=y.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:5000",s=await fetch("".concat(t,"/api/payments/initialize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_id:e,email:k.customer_email,amount:R,callback_url:"".concat(window.location.origin,"/payment/verify")})}),i=await s.json();s.ok?(F(i.authorization_url),window.location.href=i.authorization_url):Z(i.message||"Failed to initialize payment")}catch(e){Z("Payment initialization failed. Please try again.")}finally{L(!1)}},X={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}};return 0===s.length?null:(0,i.jsx)("div",{className:"min-h-screen bg-black pt-20",children:(0,i.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:(0,i.jsxs)(a.E.div,{ref:e,initial:{opacity:0,y:30},animate:t?{opacity:1,y:0}:{},transition:{duration:.8,ease:"easeOut"},children:[(0,i.jsxs)("div",{className:"mb-12",children:[(0,i.jsxs)(l.default,{href:"/cart",className:"inline-flex items-center text-yellow-500 hover:text-yellow-400 transition-colors duration-300 mb-6",children:[(0,i.jsx)(o.Z,{size:20,className:"mr-2"}),"Back to Cart"]}),(0,i.jsx)("h1",{className:"text-heading-xl font-serif text-white mb-6",children:"Checkout"}),(0,i.jsx)("p",{className:"text-body-lg text-gray-400",children:"Complete your purchase with secure payment via Paystack. No account required - just provide your email to track your order."})]}),(0,i.jsxs)(a.E.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},initial:"hidden",animate:t?"visible":"hidden",className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,i.jsx)(a.E.div,{variants:X,children:(0,i.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-sm p-8",children:[(0,i.jsx)("h2",{className:"text-heading-lg font-serif text-white mb-6",children:"Order Summary"}),(0,i.jsx)("div",{className:"space-y-4 mb-6",children:s.map(e=>(0,i.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-gray-700 rounded-sm",children:[(0,i.jsx)("div",{className:"relative w-16 h-16 flex-shrink-0",children:(0,i.jsx)(f.default,{src:e.product.images[0],alt:e.product.name,fill:!0,className:"object-cover rounded-sm"})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"text-white font-medium",children:e.product.name}),(0,i.jsxs)("p",{className:"text-gray-400 text-sm",children:["Qty: ",e.quantity]})]}),(0,i.jsx)("div",{className:"text-right",children:(0,i.jsxs)("p",{className:"text-white font-medium",children:["₦",(e.product.price*e.quantity).toLocaleString()]})})]},e.product.id))}),(0,i.jsxs)("div",{className:"border-t border-gray-700 pt-6 space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-400",children:"Subtotal"}),(0,i.jsxs)("span",{className:"text-white",children:["₦",U.toLocaleString()]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-400",children:"Tax (10%)"}),(0,i.jsxs)("span",{className:"text-white",children:["₦",B.toLocaleString()]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-400",children:"Shipping"}),(0,i.jsx)("span",{className:"text-white",children:0===q?"Free":"₦".concat(q.toLocaleString())})]}),(0,i.jsxs)("div",{className:"flex justify-between text-lg font-medium border-t border-gray-700 pt-3",children:[(0,i.jsx)("span",{className:"text-white",children:"Total"}),(0,i.jsxs)("span",{className:"text-yellow-500",children:["₦",R.toLocaleString()]})]})]})]})}),(0,i.jsx)(a.E.div,{variants:X,children:(0,i.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-sm p-8",children:[(0,i.jsx)("h2",{className:"text-heading-lg font-serif text-white mb-6",children:"Customer Information"}),E&&(0,i.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-sm p-4 mb-6",children:(0,i.jsx)("p",{className:"text-red-400 text-body-sm",children:E})}),(0,i.jsxs)("form",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("label",{htmlFor:"customer_name",className:"block text-white text-body-sm font-medium",children:"Full Name *"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(c.Z,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"text",id:"customer_name",name:"customer_name",value:k.customer_name,onChange:J,required:!0,className:"input-luxury w-full h-14 pl-10",placeholder:"Your full name"})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("label",{htmlFor:"customer_email",className:"block text-white text-body-sm font-medium",children:"Email Address *"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(d.Z,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"email",id:"customer_email",name:"customer_email",value:k.customer_email,onChange:J,required:!0,className:"input-luxury w-full h-14 pl-10",placeholder:"your@email.com"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("label",{htmlFor:"customer_phone",className:"block text-white text-body-sm font-medium",children:"Phone Number"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(u.Z,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsx)("input",{type:"tel",id:"customer_phone",name:"customer_phone",value:k.customer_phone,onChange:J,className:"input-luxury w-full h-14 pl-10",placeholder:"+234 704 892 8368"})]})]}),j&&C.length>0&&(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("label",{htmlFor:"shipping_address_id",className:"block text-white text-body-sm font-medium",children:"Shipping Address"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(m.Z,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,i.jsxs)("select",{id:"shipping_address_id",name:"shipping_address_id",value:k.shipping_address_id,onChange:J,className:"input-luxury w-full h-14 pl-10",children:[(0,i.jsx)("option",{value:"",children:"Select shipping address"}),C.filter(e=>"shipping"===e.type).map(e=>(0,i.jsxs)("option",{value:e.id,children:[e.address_line1,", ",e.city]},e.id))]})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("label",{htmlFor:"notes",className:"block text-white text-body-sm font-medium",children:"Order Notes"}),(0,i.jsx)("textarea",{id:"notes",name:"notes",value:k.notes,onChange:J,rows:3,className:"input-luxury w-full resize-none px-6 py-4",placeholder:"Any special instructions or notes..."})]}),(0,i.jsx)("div",{className:"pt-4",children:(0,i.jsx)("button",{type:"button",onClick:H,disabled:T||P,className:"btn-luxury w-full h-14 flex items-center justify-center text-body-md font-medium",children:T?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),"Creating Order..."]}):P?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),"Processing Payment..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.Z,{size:22,className:"mr-3"}),"Proceed to Payment"]})})})]}),(0,i.jsx)("div",{className:"mt-6 text-center",children:(0,i.jsxs)("p",{className:"text-gray-400 text-sm",children:["Payment powered by"," ",(0,i.jsx)("span",{className:"text-yellow-500 font-medium",children:"Paystack"})]})})]})})]})]})})})}},2371:function(e,t,s){"use strict";s.d(t,{HB:function(){return l},LM:function(){return n},Yl:function(){return o},xS:function(){return a}});var i=s(9625),r=s(6885);let a=(0,i.Ue)()((0,r.tJ)((e,t)=>({items:[],addItem:function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0;e(e=>{let r=e.items.find(e=>e.productId===t.id&&e.size===i);if(r)return{items:e.items.map(e=>e.id===r.id?{...e,quantity:e.quantity+s}:e)};let a={id:Math.random().toString(36).substr(2,9),productId:t.id,product:t,quantity:s,size:i,addedAt:new Date};return{items:[...e.items,a]}})},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.id!==t)}))},updateQuantity:(s,i)=>{if(i<=0){t().removeItem(s);return}e(e=>({items:e.items.map(e=>e.id===s?{...e,quantity:i}:e)}))},clearCart:()=>{e({items:[]})},getTotalItems:()=>t().items.reduce((e,t)=>e+t.quantity,0),getSubtotal:()=>t().items.reduce((e,t)=>e+t.product.price*t.quantity,0),getTotal:()=>{let e=t().getSubtotal();return e+.08*e+(e>200?0:15)}}),{name:"elixir-victoria-cart"})),n=(0,i.Ue)(e=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,login:t=>{e({user:t.user,token:t.token,isAuthenticated:!0})},logout:()=>{e({user:null,token:null,isAuthenticated:!1})},updateUser:t=>{e(e=>({user:e.user?{...e.user,...t}:null}))}})),l=(0,i.Ue)(e=>({isCartOpen:!1,isSearchOpen:!1,isMobileMenuOpen:!1,isNewsletterOpen:!1,openCart:()=>e({isCartOpen:!0}),closeCart:()=>e({isCartOpen:!1}),toggleCart:()=>e(e=>({isCartOpen:!e.isCartOpen})),openSearch:()=>e({isSearchOpen:!0}),closeSearch:()=>e({isSearchOpen:!1}),toggleSearch:()=>e(e=>({isSearchOpen:!e.isSearchOpen})),openMobileMenu:()=>e({isMobileMenuOpen:!0}),closeMobileMenu:()=>e({isMobileMenuOpen:!1}),toggleMobileMenu:()=>e(e=>({isMobileMenuOpen:!e.isMobileMenuOpen})),openNewsletter:()=>e({isNewsletterOpen:!0}),closeNewsletter:()=>e({isNewsletterOpen:!1}),toggleNewsletter:()=>e(e=>({isNewsletterOpen:!e.isNewsletterOpen}))})),o=(0,i.Ue)()((0,r.tJ)((e,t)=>({items:[],addItem:t=>{e(e=>e.items.some(e=>e.id===t.id)?e:{items:[...e.items,t]})},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.id!==t)}))},isInWishlist:e=>t().items.some(t=>t.id===e),clearWishlist:()=>{e({items:[]})},getTotalItems:()=>t().items.length}),{name:"elixir-victoria-wishlist"}))}},function(e){e.O(0,[710,648,377,145,971,117,744],function(){return e(e.s=2661)}),_N_E=e.O()}]);
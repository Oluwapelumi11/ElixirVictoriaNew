(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[24],{5088:function(e,t,n){Promise.resolve().then(n.bind(n,9665))},5302:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});let i=(0,n(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2449:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});let i=(0,n(9763).Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},9376:function(e,t,n){"use strict";var i=n(5475);n.o(i,"useParams")&&n.d(t,{useParams:function(){return i.useParams}}),n.o(i,"useRouter")&&n.d(t,{useRouter:function(){return i.useRouter}}),n.o(i,"useSearchParams")&&n.d(t,{useSearchParams:function(){return i.useSearchParams}})},257:function(e,t,n){"use strict";var i,r;e.exports=(null==(i=n.g.process)?void 0:i.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(4227)},4227:function(e){!function(){var t={229:function(e){var t,n,i,r=e.exports={};function s(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var c=[],o=!1,u=-1;function d(){o&&i&&(o=!1,i.length?c=i.concat(c):u=-1,c.length&&m())}function m(){if(!o){var e=l(d);o=!0;for(var t=c.length;t;){for(i=c,c=[];++u<t;)i&&i[u].run();u=-1,t=c.length}i=null,o=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||o||l(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}},a=!0;try{t[e](s,s.exports,i),a=!1}finally{a&&delete n[e]}return s.exports}i.ab="//";var r=i(229);e.exports=r}()},9665:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var i=n(7437),r=n(2265),s=n(429),a=n(8819),l=n(7648),c=n(9763);let o=(0,c.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var u=n(5302),d=n(2449);let m=(0,c.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var h=n(9376),f=n(2371),p=n(257);function y(){let[e,t]=(0,a.YD)({triggerOnce:!0,threshold:.1}),n=(0,h.useSearchParams)(),{clearCart:c}=(0,f.xS)(),[y,x]=(0,r.useState)("loading"),[g,v]=(0,r.useState)(""),[b,j]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=n.get("reference"),t=n.get("trxref"),i=e||t;i?w(i):(x("failed"),v("No payment reference found"))},[n]);let w=async e=>{try{let t=p.env.NEXT_PUBLIC_BACKEND_URL||"/api",n=await fetch("".concat(t,"/payments/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reference:e})}),i=await n.json();n.ok?(x("success"),j(i),c()):(x("failed"),v(i.message||"Payment verification failed"))}catch(e){x("failed"),v("Network error. Please check your connection and try again.")}},N={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}};return(0,i.jsx)("div",{className:"min-h-screen bg-black pt-20",children:(0,i.jsx)("div",{className:"max-w-md mx-auto px-4 sm:px-6 lg:px-8 py-24",children:(0,i.jsx)(s.E.div,{ref:e,initial:{opacity:0,y:30},animate:t?{opacity:1,y:0}:{},transition:{duration:.8,ease:"easeOut"},children:(0,i.jsx)(s.E.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},initial:"hidden",animate:t?"visible":"hidden",children:(0,i.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-sm p-10 text-center",children:["loading"===y&&(0,i.jsxs)(s.E.div,{variants:N,children:[(0,i.jsx)("div",{className:"w-20 h-20 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,i.jsx)(o,{size:40,className:"text-yellow-500 animate-spin"})}),(0,i.jsx)("h2",{className:"text-heading-lg font-serif text-white mb-4",children:"Verifying Payment"}),(0,i.jsx)("p",{className:"text-gray-400 text-body-md",children:"Please wait while we verify your payment..."})]}),"success"===y&&(0,i.jsxs)(s.E.div,{variants:N,children:[(0,i.jsx)("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,i.jsx)(u.Z,{size:40,className:"text-green-500"})}),(0,i.jsx)("h2",{className:"text-heading-lg font-serif text-white mb-4",children:"Payment Successful!"}),(0,i.jsx)("p",{className:"text-gray-400 text-body-md mb-6",children:"Thank you for your purchase. Your order has been confirmed and will be processed shortly."}),(null==b?void 0:b.transaction)&&(0,i.jsxs)("div",{className:"bg-gray-700 rounded-sm p-4 mb-6",children:[(0,i.jsx)("p",{className:"text-white text-sm mb-2",children:"Transaction Details:"}),(0,i.jsxs)("p",{className:"text-gray-400 text-sm",children:["Amount: â‚¦",b.transaction.amount.toLocaleString()]}),(0,i.jsxs)("p",{className:"text-gray-400 text-sm",children:["Transaction ID: ",b.transaction.id]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)(l.default,{href:"/account",className:"btn-luxury w-full flex items-center justify-center",children:[(0,i.jsx)(d.Z,{size:20,className:"mr-2"}),"View Orders"]}),(0,i.jsx)(l.default,{href:"/collection",className:"btn-luxury-ghost w-full flex items-center justify-center",children:"Continue Shopping"})]})]}),"failed"===y&&(0,i.jsxs)(s.E.div,{variants:N,children:[(0,i.jsx)("div",{className:"w-20 h-20 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,i.jsx)(m,{size:40,className:"text-red-500"})}),(0,i.jsx)("h2",{className:"text-heading-lg font-serif text-white mb-4",children:"Payment Failed"}),(0,i.jsx)("p",{className:"text-gray-400 text-body-md mb-6",children:g||"There was an issue with your payment. Please try again."}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)(l.default,{href:"/checkout",className:"btn-luxury w-full flex items-center justify-center",children:"Try Again"}),(0,i.jsx)(l.default,{href:"/cart",className:"btn-luxury-ghost w-full flex items-center justify-center",children:"Back to Cart"})]})]})]})})})})})}function x(){return(0,i.jsx)(r.Suspense,{fallback:(0,i.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,i.jsx)("div",{className:"text-white",children:"Loading..."})}),children:(0,i.jsx)(y,{})})}},2371:function(e,t,n){"use strict";n.d(t,{HB:function(){return l},LM:function(){return a},Yl:function(){return c},xS:function(){return s}});var i=n(9625),r=n(6885);let s=(0,i.Ue)()((0,r.tJ)((e,t)=>({items:[],addItem:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0;e(e=>{let r=e.items.find(e=>e.productId===t.id&&e.size===i);if(r)return{items:e.items.map(e=>e.id===r.id?{...e,quantity:e.quantity+n}:e)};let s={id:Math.random().toString(36).substr(2,9),productId:t.id,product:t,quantity:n,size:i,addedAt:new Date};return{items:[...e.items,s]}})},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.id!==t)}))},updateQuantity:(n,i)=>{if(i<=0){t().removeItem(n);return}e(e=>({items:e.items.map(e=>e.id===n?{...e,quantity:i}:e)}))},clearCart:()=>{e({items:[]})},getTotalItems:()=>t().items.reduce((e,t)=>e+t.quantity,0),getSubtotal:()=>t().items.reduce((e,t)=>e+t.product.price*t.quantity,0),getTotal:()=>{let e=t().getSubtotal();return e+.08*e+(e>200?0:15)}}),{name:"elixir-victoria-cart"})),a=(0,i.Ue)(e=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,login:t=>{e({user:t.user,token:t.token,isAuthenticated:!0})},logout:()=>{e({user:null,token:null,isAuthenticated:!1})},updateUser:t=>{e(e=>({user:e.user?{...e.user,...t}:null}))}})),l=(0,i.Ue)(e=>({isCartOpen:!1,isSearchOpen:!1,isMobileMenuOpen:!1,isNewsletterOpen:!1,openCart:()=>e({isCartOpen:!0}),closeCart:()=>e({isCartOpen:!1}),toggleCart:()=>e(e=>({isCartOpen:!e.isCartOpen})),openSearch:()=>e({isSearchOpen:!0}),closeSearch:()=>e({isSearchOpen:!1}),toggleSearch:()=>e(e=>({isSearchOpen:!e.isSearchOpen})),openMobileMenu:()=>e({isMobileMenuOpen:!0}),closeMobileMenu:()=>e({isMobileMenuOpen:!1}),toggleMobileMenu:()=>e(e=>({isMobileMenuOpen:!e.isMobileMenuOpen})),openNewsletter:()=>e({isNewsletterOpen:!0}),closeNewsletter:()=>e({isNewsletterOpen:!1}),toggleNewsletter:()=>e(e=>({isNewsletterOpen:!e.isNewsletterOpen}))})),c=(0,i.Ue)()((0,r.tJ)((e,t)=>({items:[],addItem:t=>{e(e=>e.items.some(e=>e.id===t.id)?e:{items:[...e.items,t]})},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.id!==t)}))},isInWishlist:e=>t().items.some(t=>t.id===e),clearWishlist:()=>{e({items:[]})},getTotalItems:()=>t().items.length}),{name:"elixir-victoria-wishlist"}))}},function(e){e.O(0,[710,648,377,971,117,744],function(){return e(e.s=5088)}),_N_E=e.O()}]);